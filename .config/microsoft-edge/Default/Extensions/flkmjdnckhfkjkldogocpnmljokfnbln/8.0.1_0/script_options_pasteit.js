const commands={0:"keyboard-paste",1:"pa-keyboard-paste",2:"pb-keyboard-paste2",3:"pc-keyboard-paste3",4:"pd-keyboard-paste4",5:"pe-keyboard-paste5",6:"pf-keyboard-paste6",7:"pg-keyboard-paste7",8:"ph-keyboard-paste8",9:"pi-keyboard-paste9",10:"pj-keyboard-paste10",11:"pk-keyboard-paste11",12:"pl-keyboard-paste12",13:"pm-keyboard-paste13",14:"pn-keyboard-paste14",15:"po-keyboard-paste15"},commandsArray=Object.values(commands),keys={0:"pasteText",1:"altText",2:"altText2",3:"altText3",4:"altText4",5:"altText5",6:"altText6",7:"altText7",8:"altText8",9:"altText9",10:"altText10",11:"altText11",12:"altText12",13:"altText13",14:"altText14",15:"altText15"},keyArray=Object.values(keys),shortcuts={0:"shortcutPrimary",1:"shortcutAlt",2:"shortcutAlt2",3:"shortcutAlt3",4:"shortcutAlt4",5:"shortcutAlt5",6:"shortcutAlt6",7:"shortcutAlt7",8:"shortcutAlt8",9:"shortcutAlt9",10:"shortcutAlt10",11:"shortcutAlt11",12:"shortcutAlt12",13:"shortcutAlt13",14:"shortcutAlt14",15:"shortcutAlt15"};var browser=(e=>!0==e.userAgent.toLowerCase().indexOf("edg")>-1?"edge":e.brave?"brave":"other")(window.navigator);let controlKey,macMode;-1!=navigator.appVersion.indexOf("Mac")?(macMode=!0,controlKey="&#8984;"):(macMode=!1,controlKey="CTRL");const stringByBrowser={brave:{move:'"Pin" or "Unpin"',shortcuts:"brave://extensions/shortcuts"},edge:{move:'"Hide from toolbar" or "Show in toolbar"',shortcuts:"edge://extensions/shortcuts"},other:{move:'"Pin" or "Unpin"',shortcuts:"chrome://extensions/shortcuts"}};chrome.action.onClicked.addListener((()=>{document.hidden||window.alert("You clicked the Paste It Toolbar Button!\n\nSet your paste text then open a web page to start pasting.")})),chrome.contextMenus.onClicked.addListener((()=>{document.hidden||window.alert("You selected Paste It text from the Context Menu!\n\nSet your paste text then open a web page to start pasting.")})),chrome.commands.onCommand.addListener((()=>{document.hidden||window.alert("You used a Paste It keyboard command!\n\nSet your paste text then open a web page to start pasting.")}));let strings=stringByBrowser[browser],isCritical=!1;function updateStorage(e){isCritical||chrome.storage.sync.get(e,(t=>{const o={};for(let a of e){const e=document.getElementById(a);if(e){const n=e.value;void 0!==n&&t[a]!=n&&(o[a]=n)}}Object.keys(o).length>0&&chrome.storage.sync.set(o).then((()=>{})).catch((e=>{isCritical=!0,e?.message.includes("QUOTA_BYTES_PER_ITEM")?window.alert("Could not update paste text, maxiumum character limit reached. Please reduce the amount of text and try again."):window.alert("Could not update paste text. If the issue persists, please try restarting the browser."),window.location.reload()}))}))}function updateText(){updateStorage(keyArray)}function showAltKey(e){const t=keys[e],o=document.getElementById("altTextContainer"+e);if(o){o.innerHTML=`\n        <textarea\n        id="${t}"\n        placeholder="Enter paste text here"\n        rows="4"\n        cols="80"\n        ></textarea>`;const a=document.getElementById(keys[e]);a&&a.focus()}}function ready(e){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}ready((()=>{window.location.hash.includes("fromPaste")&&(window.alert("Set your paste text below to start pasting inside Input fields on websites that you visit. System pages and insecure websites are not supported."),window.location.hash=""),document.querySelectorAll(".localize").forEach((e=>{const t=strings[e.textContent];e.textContent=t})),document.querySelectorAll(".controlKey").forEach((e=>{e.innerHTML=controlKey})),updateStorage(keyArray),chrome.storage.sync.get(keyArray,(e=>{for(let t=1;t<=15;t++){if(e[keys[t]])showAltKey(t);else{const e=`addAltText${t}`,o=document.getElementById("altTextContainer"+t);if(o){o.innerHTML=`<button id="${e}">Add Text</button>`;const a=document.getElementById(e);a&&a.addEventListener("click",(()=>showAltKey(t)))}}}for(let t of keyArray){const o=document.getElementById(t);o&&(o.addEventListener("keyup",updateText),o.addEventListener("change",updateText),e[t]&&(o.value=e[t]))}document.querySelectorAll(".shortcuts").forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),chrome.tabs.create({url:strings.shortcuts})}))}));const t=document.getElementById("pasteText");t&&t.focus(),n(),setInterval(n,500),document.getElementById("options").style.opacity=1}));const e=document.getElementById("checkboxContext"),t=document.getElementById("checkboxAltContext"),o=document.getElementById("checkboxKeyboard"),a=document.getElementById("checkboxAltToolbar");e&&t&&o&&a&&(chrome.storage.sync.get(["popupDisabled","contextDisabled","contextFlyout","keyboardDisabled"],(n=>{"true"===n.contextDisabled?.toString()?(e.checked=!1,t.disabled=!0):(e.checked=!0,t.disabled=!1,"false"===n.contextFlyout?.toString()?t.checked=!1:t.checked=!0),"true"===n.keyboardDisabled?.toString()?o.checked=!1:o.checked=!0,"true"===n.popupDisabled?.toString()?a.checked=!1:a.checked=!0})),e.addEventListener("change",(()=>{chrome.storage.sync.set({contextDisabled:!e.checked}),e.checked?e.disabled=!1:e.disabled=!0})),o.addEventListener("change",(()=>{chrome.storage.sync.set({keyboardDisabled:!o.checked})})),a.addEventListener("change",(()=>{const e=!a.checked;chrome.storage.sync.set({popupDisabled:e})})),t.addEventListener("change",(()=>{chrome.storage.sync.set({contextFlyout:t.checked})})));const n=()=>{updateText(),chrome.commands.getAll((e=>{for(let t=0;t<keyArray.length;t++)for(let o in e){const a=commands[t];if(e[o].name===a){const n=document.getElementById(shortcuts[t]);n&&(e[o].shortcut?n.innerHTML="keyboard-paste"===a?"Use the <b>"+e[o].shortcut+"</b> keyboard shortcut":`<b>${e[o].shortcut}</b>`:n.innerHTML="keyboard-paste"===a?"Use a keyboard shortcut":"<b>Shortcut not set</b>")}}}))}}));